<Ui xmlns="http://www.blizzard.com/wow/ui/">
	<Script file="minimap.lua"/>

	<!-- Based on ItemRack's minimap button -->
	<Button name="BongosMinimapFrame" frameStrata="LOW" parent="Minimap" enableMouse="true" movable="true">
		<Size x="33" y="33"/>

		<Anchors>
			<Anchor point="TOPLEFT">
				<Offset x="-15" y="0"/>
			</Anchor>
		</Anchors>

		<Layers>
			<Layer level="BACKGROUND">
				<Texture name="$parentIcon" file="Interface\Icons\INV_Misc_Drum_04">
					<Size x="21" y="21"/>

					<Anchors>
						<Anchor point="TOPLEFT">
							<Offset x="7" y="-6"/>
						</Anchor>
					</Anchors>
					<TexCoords left="0.075" right="0.925" top="0.075" bottom="0.925"/>
				</Texture>
			</Layer>

			<Layer level="OVERLAY">
				<Texture file="Interface\Minimap\MiniMap-TrackingBorder">
					<Size x="56" y="56"/>

					<Anchors>
						<Anchor point="TOPLEFT"/>
					</Anchors>
				</Texture>
			</Layer>
		</Layers>
		
		<Frames>
			<Frame name="$parentMover" hidden="true">
				<Scripts>
					<OnUpdate>
						BongosMinimap.OnUpdate(self:GetParent(), arg1)
					</OnUpdate>
				</Scripts>
			</Frame>
		</Frames>

		<Scripts>
			<OnLoad>
				self:RegisterForClicks("anyUp")
				self:RegisterForDrag("LeftButton")
			</OnLoad>
			<OnEnter>
				BongosMinimap.OnEnter(self)
			</OnEnter>
			<OnMouseDown>
				getglobal(self:GetName() .. "Icon"):SetTexCoord(0,1,0,1)
			</OnMouseDown>
			<OnMouseUp>
				getglobal(self:GetName() .. "Icon"):SetTexCoord(0.075,0.925,0.075,0.925)
			</OnMouseUp>
			<OnLeave>
				GameTooltip:Hide()
			</OnLeave>
			<OnDragStart>
				self:LockHighlight()
				self:StartMoving()
				getglobal(self:GetName() .. "Mover"):Show()
			</OnDragStart>
			<OnDragStop>
				self:UnlockHighlight()
				self:StopMovingOrSizing()
				self:SetUserPlaced(true)
				getglobal(self:GetName() .. "Mover"):Hide()
				getglobal(self:GetName() .. "Icon"):SetTexCoord(0.075,0.925,0.075,0.925)
			</OnDragStop>
			<OnClick>
				BongosMinimap.OnClick(self, arg1)
				getglobal(self:GetName() .. "Icon"):SetTexCoord(0.075,0.925,0.075,0.925)
			</OnClick>
		</Scripts>
		
		<HighlightTexture alphaMode="ADD" file="Interface\Minimap\UI-Minimap-ZoomButton-Highlight"/>
	</Button>
</Ui>